{"id":"../node_modules/@bikeshaving/crank/esm/dom.js","dependencies":[{"name":"/Users/josh/repos/personal/AMomentaryLapseOfSanity/frontend/extension/node_modules/@bikeshaving/crank/esm/dom.js.map","includedInParent":true,"mtime":1589768406000},{"name":"/Users/josh/repos/personal/AMomentaryLapseOfSanity/frontend/extension/package.json","includedInParent":true,"mtime":1589840248624},{"name":"/Users/josh/repos/personal/AMomentaryLapseOfSanity/frontend/extension/node_modules/@bikeshaving/crank/package.json","includedInParent":true,"mtime":1589840006303},{"name":"./index-e98190bc.js","loc":{"line":1,"column":144},"parent":"/Users/josh/repos/personal/AMomentaryLapseOfSanity/frontend/extension/node_modules/@bikeshaving/crank/esm/dom.js","resolved":"/Users/josh/repos/personal/AMomentaryLapseOfSanity/frontend/extension/node_modules/@bikeshaving/crank/esm/index-e98190bc.js"}],"generated":{"js":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.renderer = exports.env = exports.DOMRenderer = void 0;\n\nvar _indexE98190bc = require(\"./index-e98190bc.js\");\n\nvar _a;\n\nvar SVG_NAMESPACE = \"http://www.w3.org/2000/svg\"; // TODO: create an allowlist/blocklist of props\n\nfunction updateProps(el, props, newProps, namespace) {\n  for (var name_1 in (0, _indexE98190bc.f)((0, _indexE98190bc.f)({}, props), newProps)) {\n    var value = props[name_1];\n    var newValue = newProps[name_1];\n\n    switch (name_1) {\n      case \"children\":\n        break;\n\n      case \"class\":\n      case \"className\":\n        {\n          if (namespace === SVG_NAMESPACE) {\n            el.setAttribute(\"class\", newValue);\n          } else {\n            el.className = newValue;\n          }\n\n          break;\n        }\n\n      case \"style\":\n        {\n          var style = el.style;\n\n          if (style != null) {\n            if (newValue == null) {\n              el.removeAttribute(\"style\");\n            } else if (typeof newValue === \"string\") {\n              style.cssText = newValue;\n            } else {\n              for (var styleName in (0, _indexE98190bc.f)((0, _indexE98190bc.f)({}, value), newValue)) {\n                var styleValue = value && value[styleName];\n                var newStyleValue = newValue && newValue[styleName];\n\n                if (newStyleValue == null) {\n                  style.removeProperty(styleName);\n                } else if (styleValue !== newStyleValue) {\n                  style.setProperty(styleName, newStyleValue);\n                }\n              }\n            }\n          }\n\n          break;\n        }\n\n      default:\n        {\n          if (name_1 in el) {\n            el[name_1] = newValue;\n            break;\n          } else if (newValue === true) {\n            el.setAttribute(name_1, \"\");\n          } else if (newValue === false || newValue == null) {\n            el.removeAttribute(name_1);\n          } else {\n            el.setAttribute(name_1, newValue);\n          }\n\n          break;\n        }\n    }\n  }\n}\n\nfunction updateChildren(el, newChildren, dirtyStart) {\n  if (newChildren.length === 0) {\n    el.textContent = \"\";\n    return;\n  }\n\n  var oldChild = newChildren[dirtyStart] === undefined ? el.firstChild : newChildren[dirtyStart];\n  var ni = dirtyStart || 0;\n\n  while (oldChild !== null && ni < newChildren.length) {\n    var newChild = newChildren[ni];\n\n    if (oldChild === newChild) {\n      oldChild = oldChild.nextSibling;\n      ni++;\n    } else if (typeof newChild === \"string\") {\n      if (oldChild.splitText !== undefined) {\n        oldChild.nodeValue = newChild;\n        oldChild = oldChild.nextSibling;\n      } else {\n        el.insertBefore(document.createTextNode(newChild), oldChild);\n      }\n\n      ni++;\n    } else if (oldChild.splitText !== undefined) {\n      var nextSibling = oldChild.nextSibling;\n      el.removeChild(oldChild);\n      oldChild = nextSibling;\n    } else {\n      el.insertBefore(newChild, oldChild);\n      ni++; // TODO: this is an optimization for the js frameworks benchmark\n      // swap rows, but we need to think a little more about other\n      // pathological cases.\n\n      if (oldChild !== newChildren[ni]) {\n        var nextSibling = oldChild.nextSibling;\n        el.removeChild(oldChild);\n        oldChild = nextSibling;\n      }\n    }\n  }\n\n  while (oldChild !== null) {\n    var nextSibling = oldChild.nextSibling;\n    el.removeChild(oldChild);\n    oldChild = nextSibling;\n  }\n\n  for (; ni < newChildren.length; ni++) {\n    var newChild = newChildren[ni];\n    el.appendChild(typeof newChild === \"string\" ? document.createTextNode(newChild) : newChild);\n  }\n}\n\nfunction createDocumentFragmentFromHTML(html) {\n  if (typeof document.createRange === \"function\") {\n    return document.createRange().createContextualFragment(html);\n  } else {\n    var fragment = document.createDocumentFragment();\n    var childNodes = new DOMParser().parseFromString(html, \"text/html\").body.childNodes;\n\n    for (var i = 0; i < childNodes.length; i++) {\n      fragment.appendChild(childNodes[i]);\n    }\n\n    return fragment;\n  }\n} // TODO: Environment type should probably be Element | DocumentFragment\n\n\nvar env = (_a = {}, _a[_indexE98190bc.D] = function (tag) {\n  if (typeof tag !== \"string\") {\n    throw new Error(\"Unknown tag: \" + tag.toString());\n  }\n\n  var cachedEl;\n  return function defaultDOM() {\n    var ns, el, props, oldLength, _a, _b, nextProps, e_1_1;\n\n    var e_1, _c;\n\n    return (0, _indexE98190bc._)(this, function (_d) {\n      switch (_d.label) {\n        case 0:\n          ns = tag === \"svg\" ? SVG_NAMESPACE : this.scope;\n\n          if (cachedEl === undefined) {\n            if (ns == null) {\n              cachedEl = document.createElement(tag);\n            } else {\n              cachedEl = document.createElementNS(ns, tag);\n            }\n          }\n\n          el = cachedEl.cloneNode();\n          props = {};\n          oldLength = 0;\n          _d.label = 1;\n\n        case 1:\n          _d.trys.push([1,, 10, 11]);\n\n          _d.label = 2;\n\n        case 2:\n          _d.trys.push([2, 7, 8, 9]);\n\n          _a = (0, _indexE98190bc.e)(this), _b = _a.next();\n          _d.label = 3;\n\n        case 3:\n          if (!!_b.done) return [3\n          /*break*/\n          , 6];\n          nextProps = _b.value; // We can’t use referential identity of props because we don’t have any\n          // restrictions like elements have to be immutable.\n\n          if (this.dirtyProps) {\n            updateProps(el, props, nextProps, ns);\n          }\n\n          if (this.dirtyChildren && nextProps.innerHTML === undefined && (oldLength > 0 || nextProps.children.length > 0)) {\n            updateChildren(el, nextProps.children, this.dirtyStart);\n          }\n\n          props = nextProps;\n          oldLength = nextProps.children.length;\n          return [4\n          /*yield*/\n          , el];\n\n        case 4:\n          _d.sent();\n\n          _d.label = 5;\n\n        case 5:\n          _b = _a.next();\n          return [3\n          /*break*/\n          , 3];\n\n        case 6:\n          return [3\n          /*break*/\n          , 9];\n\n        case 7:\n          e_1_1 = _d.sent();\n          e_1 = {\n            error: e_1_1\n          };\n          return [3\n          /*break*/\n          , 9];\n\n        case 8:\n          try {\n            if (_b && !_b.done && (_c = _a.return)) _c.call(_a);\n          } finally {\n            if (e_1) throw e_1.error;\n          }\n\n          return [7\n          /*endfinally*/\n          ];\n\n        case 9:\n          return [3\n          /*break*/\n          , 11];\n\n        case 10:\n          if (this.dirtyRemoval && el.parentNode !== null) {\n            el.parentNode.removeChild(el);\n          }\n\n          return [7\n          /*endfinally*/\n          ];\n\n        case 11:\n          return [2\n          /*return*/\n          ];\n      }\n    });\n  };\n}, _a[_indexE98190bc.R] = function (_a) {\n  var fragment, _b, _c, newValue, e_2_1;\n\n  var e_2, _d;\n\n  var value = _a.value;\n  return (0, _indexE98190bc._)(this, function (_e) {\n    switch (_e.label) {\n      case 0:\n        _e.trys.push([0, 7, 8, 9]);\n\n        _b = (0, _indexE98190bc.e)(this), _c = _b.next();\n        _e.label = 1;\n\n      case 1:\n        if (!!_c.done) return [3\n        /*break*/\n        , 6];\n        newValue = _c.value.value;\n        if (!(typeof value === \"string\")) return [3\n        /*break*/\n        , 3];\n\n        if (fragment === undefined || value !== newValue) {\n          fragment = createDocumentFragmentFromHTML(value);\n          value = newValue;\n        } // TODO: figure out what the type of this Environment actually is\n\n\n        return [4\n        /*yield*/\n        , fragment];\n\n      case 2:\n        // TODO: figure out what the type of this Environment actually is\n        _e.sent();\n\n        return [3\n        /*break*/\n        , 5];\n\n      case 3:\n        fragment = undefined;\n        return [4\n        /*yield*/\n        , value];\n\n      case 4:\n        _e.sent();\n\n        _e.label = 5;\n\n      case 5:\n        _c = _b.next();\n        return [3\n        /*break*/\n        , 1];\n\n      case 6:\n        return [3\n        /*break*/\n        , 9];\n\n      case 7:\n        e_2_1 = _e.sent();\n        e_2 = {\n          error: e_2_1\n        };\n        return [3\n        /*break*/\n        , 9];\n\n      case 8:\n        try {\n          if (_c && !_c.done && (_d = _b.return)) _d.call(_b);\n        } finally {\n          if (e_2) throw e_2.error;\n        }\n\n        return [7\n        /*endfinally*/\n        ];\n\n      case 9:\n        return [2\n        /*return*/\n        ];\n    }\n  });\n}, _a[_indexE98190bc.P] = function (_a) {\n  var _b, _c, _d, newRoot, children, e_3_1;\n\n  var e_3, _e;\n\n  var root = _a.root;\n  return (0, _indexE98190bc._)(this, function (_f) {\n    switch (_f.label) {\n      case 0:\n        if (root == null) {\n          throw new TypeError(\"Portal element is missing root node\");\n        }\n\n        _f.label = 1;\n\n      case 1:\n        _f.trys.push([1,, 10, 11]);\n\n        _f.label = 2;\n\n      case 2:\n        _f.trys.push([2, 7, 8, 9]);\n\n        _b = (0, _indexE98190bc.e)(this), _c = _b.next();\n        _f.label = 3;\n\n      case 3:\n        if (!!_c.done) return [3\n        /*break*/\n        , 6];\n        _d = _c.value, newRoot = _d.root, children = _d.children;\n\n        if (newRoot == null) {\n          throw new TypeError(\"Portal element is missing root node\");\n        }\n\n        if (root !== newRoot) {\n          updateChildren(root, []);\n          root = newRoot;\n          updateChildren(root, children);\n        } else if (this.dirtyChildren) {\n          updateChildren(root, children);\n        }\n\n        return [4\n        /*yield*/\n        , root];\n\n      case 4:\n        _f.sent();\n\n        _f.label = 5;\n\n      case 5:\n        _c = _b.next();\n        return [3\n        /*break*/\n        , 3];\n\n      case 6:\n        return [3\n        /*break*/\n        , 9];\n\n      case 7:\n        e_3_1 = _f.sent();\n        e_3 = {\n          error: e_3_1\n        };\n        return [3\n        /*break*/\n        , 9];\n\n      case 8:\n        try {\n          if (_c && !_c.done && (_e = _b.return)) _e.call(_b);\n        } finally {\n          if (e_3) throw e_3.error;\n        }\n\n        return [7\n        /*endfinally*/\n        ];\n\n      case 9:\n        return [3\n        /*break*/\n        , 11];\n\n      case 10:\n        updateChildren(root, []);\n        return [7\n        /*endfinally*/\n        ];\n\n      case 11:\n        return [2\n        /*return*/\n        ];\n    }\n  });\n}, _a[_indexE98190bc.S] = {\n  svg: SVG_NAMESPACE,\n  foreignObject: undefined\n}, _a);\nexports.env = env;\n\nvar DOMRenderer =\n/** @class */\nfunction (_super) {\n  (0, _indexE98190bc.d)(DOMRenderer, _super);\n\n  function DOMRenderer() {\n    return _super.call(this, env) || this;\n  }\n\n  return DOMRenderer;\n}(_indexE98190bc.b);\n\nexports.DOMRenderer = DOMRenderer;\nvar renderer = new DOMRenderer();\nexports.renderer = renderer;"},"sourceMaps":{"js":{"mappings":[],"sources":{},"lineCount":null}},"error":null,"hash":"4cbced5009f7b6e9930d45c6e2bf5d74","cacheData":{"env":{}}}