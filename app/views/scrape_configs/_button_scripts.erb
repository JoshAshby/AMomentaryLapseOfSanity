<script>
function addButton() {
  return {
    add(ev) {
      ev.preventDefault()
      const { $el } = this

      const clone = $el.parentNode.querySelector("span").cloneNode(true)
      clone.querySelector("input").value = ""

      $el.parentNode.insertBefore(clone, $el)
    }
  }
}

function removeButton() {
  return {
    remove(ev) {
      ev.preventDefault()
      const { $el } = this

      // Prevent removing the last input and clear it instead so we can still clone
      if ($el.parentNode.querySelectorAll("span").length != 1)
        $el.remove()
      else
        $el.querySelector("input").value = ""
    }
  }
}

document.addEventListener("load", () => {
let freqRadio = document.getElementById("frequency")
let todRadio = document.getElementById("time_of_day")

let freqPicker = document.getElementById("frequency_schedule")
let todPicker = document.getElementById("time_of_day_schedule")

function toggle() {
  if (freqRadio.checked) {
    freqPicker.classList.remove("hidden")
    todPicker.classList.add("hidden")
  } else {
    freqPicker.classList.add("hidden")
    todPicker.classList.remove("hidden")
  }
}

toggle()

freqRadio.addEventListener("click", toggle)
todRadio.addEventListener("click", toggle)
})
</script>
